(()=>{"use strict";var e;let t,n;function i(){if(n=null,t=document.getElementById("lunar-canvas"),!t)return;t.style.display="none";const l=window.innerWidth,a=window.innerHeight;let o,s;const d=new DOMMatrix;l>=a?(t.width=e.WIDTH,t.height=e.HEIGHT,o=l,s=o*e.HEIGHT/e.WIDTH,a<s&&(s=a,o=s*e.WIDTH/e.HEIGHT)):(t.width=e.HEIGHT,t.height=e.WIDTH,o=a,s=o*e.HEIGHT/e.WIDTH,l<s&&(s=l,o=s*e.WIDTH/e.HEIGHT),d.a=d.d=d.e=0,d.b=-1,d.c=1,d.f=e.WIDTH),console.log(`${o} ${s}`),t.style.display="block",t.style.width=`${Math.floor(o)}px`,t.style.height=`${Math.floor(s)}px`,t.style.left=`${Math.floor((l-o)/2)}px`,t.style.top=`${Math.floor((a-s)/2)}px`,n=t.getContext("2d"),n&&(n.setTransform(d),n?(n.fillStyle="#000000",n.fillRect(0,0,e.WIDTH,e.HEIGHT),n.strokeStyle="#FF0000",n.beginPath(),n.moveTo(0,0),n.lineTo(10,10),n.stroke()):i())}!function(e){e[e.WIDTH=320]="WIDTH",e[e.HEIGHT=200]="HEIGHT"}(e||(e={}));let l=null,a=!1,o=null;const s=()=>{null!=o&&o();const e=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);e.addEventListener("change",s),o=()=>e.removeEventListener("change",s),i()};document.addEventListener("DOMContentLoaded",(function(){document.addEventListener("dblclick",(e=>e.preventDefault()),{passive:!1}),window.addEventListener("touchmove",(e=>e.preventDefault()),{passive:!1}),document.addEventListener("visibilitychange",(()=>{"visible"===document.visibilityState&&!a&&null===l&&"wakeLock"in navigator&&(a=!0,navigator.wakeLock.request("screen").then((e=>{a&&(l=e,l.addEventListener("release",(()=>{a||(l=null)})))})).catch((e=>{})).finally((()=>a=!1)))})),window.addEventListener("resize",i),document.getElementById("main-content").innerHTML=`<canvas id="lunar-canvas" class="canvas" width="${e.WIDTH}" \n            height="${e.HEIGHT}"></canvas>`,t=document.getElementById("lunar-canvas"),t&&i(),s()}))})();